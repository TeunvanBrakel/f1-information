{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/teunv/OneDrive/Documenten/Fontys/Semester 3/Individueel/f1-information/Front-end/Admin-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport jwtDecode from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/auth.service\";\nimport * as i2 from \"../_services/token-storage.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction LoginComponent_form_5_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" Username is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_form_5_div_13_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_form_5_div_13_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Password must be at least 6 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponent_form_5_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, LoginComponent_form_5_div_13_div_1_Template, 2, 0, \"div\", 19);\n    i0.ɵɵtemplate(2, LoginComponent_form_5_div_13_div_2_Template, 2, 0, \"div\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r6 = i0.ɵɵreference(12);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors[\"minlength\"]);\n  }\n}\n\nfunction LoginComponent_form_5_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Login failed. You have used \", ctx_r8.fails, \"/5 attemps. \");\n  }\n}\n\nfunction LoginComponent_form_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 6, 7);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_5_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n\n      const _r3 = i0.ɵɵreference(1);\n\n      const ctx_r11 = i0.ɵɵnextContext();\n      return _r3.form.valid && ctx_r11.onSubmit();\n    });\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵelementStart(3, \"label\", 9);\n    i0.ɵɵtext(4, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 10, 11);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_5_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.form.username = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, LoginComponent_form_5_div_7_Template, 2, 0, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 13);\n    i0.ɵɵelementStart(9, \"label\", 14);\n    i0.ɵɵtext(10, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 15, 16);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_5_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.form.password = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, LoginComponent_form_5_div_13_Template, 3, 2, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 13);\n    i0.ɵɵelementStart(15, \"button\", 17);\n    i0.ɵɵtext(16, \" Login \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 13);\n    i0.ɵɵtemplate(18, LoginComponent_form_5_div_18_Template, 2, 1, \"div\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r3 = i0.ɵɵreference(1);\n\n    const _r4 = i0.ɵɵreference(6);\n\n    const _r6 = i0.ɵɵreference(12);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r4.errors && _r3.submitted);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.password);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r6.errors && _r3.submitted);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", _r3.submitted && ctx_r0.isLoginFailed);\n  }\n}\n\nfunction LoginComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Logged in as \", ctx_r1.roles, \". \");\n  }\n}\n\nfunction LoginComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_div_7_Template_div_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onSubmit();\n    });\n    i0.ɵɵtext(1, \" You need to wait for 1 minutes. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class LoginComponent {\n  constructor(authService, tokenStorage) {\n    this.authService = authService;\n    this.tokenStorage = tokenStorage;\n    this.form = {\n      username: null,\n      password: null\n    };\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage = \"\";\n    this.roles = [];\n    this.failedLogin = 0;\n    this.fails = \"\";\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.tokenStorage.getToken()) {\n        _this.isLoggedIn = true;\n        _this.roles = _this.tokenStorage.getUser();\n      }\n\n      if (localStorage.getItem(\"fails\") != null) {\n        _this.fails = window.localStorage.getItem(\"fails\");\n\n        if (_this.fails == \"1\") {\n          _this.failedLogin = 1;\n        } else if (_this.fails == \"2\") {\n          _this.failedLogin = 2;\n        } else if (_this.fails == \"3\") {\n          _this.failedLogin = 3;\n        } else if (_this.fails == \"4\") {\n          _this.failedLogin = 4;\n        }\n      }\n    })();\n  }\n\n  onSubmit() {\n    var _this2 = this;\n\n    const {\n      username,\n      password\n    } = this.form; //console.log(this.authService.login(username, password));\n\n    this.authService.login(username, password).subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (data) {\n        console.log(data.text);\n\n        _this2.tokenStorage.saveToken(data.accessToken);\n\n        _this2.tokenStorage.saveUser(data);\n\n        if (_this2.tokenStorage.getRole() != \"Admin\") {\n          var test = jwtDecode(data.accessToken);\n        } else {\n          console.log(_this2.tokenStorage);\n          _this2.isLoginFailed = false;\n          _this2.isLoggedIn = true;\n\n          _this2.tokenStorage.saveUser(username);\n\n          _this2.roles = _this2.tokenStorage.getUser();\n\n          _this2.reloadPage();\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (err) {\n        _this2.errorMessage = err.title;\n        _this2.failedLogin = _this2.failedLogin + 1;\n        localStorage.setItem(\"fails\", _this2.failedLogin.toLocaleString());\n        _this2.fails = window.localStorage.getItem(\"fails\");\n        _this2.isLoginFailed = true;\n\n        if (_this2.fails == \"5\") {\n          yield new Promise(f => setTimeout(f, 60000));\n          _this2.failedLogin = 0;\n          localStorage.setItem(\"fails\", _this2.failedLogin.toLocaleString());\n          _this2.fails = window.localStorage.getItem(\"fails\");\n        }\n      });\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n\n  reloadPage() {\n    window.location.reload();\n  }\n\n}\n\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.TokenStorageService));\n};\n\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 8,\n  vars: 3,\n  consts: [[1, \"col-md-12\"], [1, \"card\", \"card-container\", \"signupform\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"name\", \"form\", \"novalidate\", \"\", \"class\", \"signupform\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"name\", \"form\", \"novalidate\", \"\", 1, \"signupform\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-group\", \"signupform\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [4, \"ngIf\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-danger\", 3, \"ngSubmit\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementStart(3, \"p\");\n      i0.ɵɵtext(4, \"Only admins can login to this application.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, LoginComponent_form_5_Template, 19, 5, \"form\", 3);\n      i0.ɵɵtemplate(6, LoginComponent_div_6_Template, 2, 1, \"div\", 4);\n      i0.ɵɵtemplate(7, LoginComponent_div_7_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn && ctx.failedLogin < 5);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.failedLogin == 5);\n    }\n  },\n  directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.RequiredValidator, i4.NgControlStatus, i4.NgModel, i4.MinLengthValidator],\n  styles: [\".profile-img-card[_ngcontent-%COMP%]{\\r\\n    height: 300px;\\r\\n    width: -moz-fit-content;\\r\\n    width: fit-content;\\r\\n    margin-left: 35%;\\r\\n    margin-right: 50%;\\r\\n}\\r\\n\\r\\n.btn-primary[_ngcontent-%COMP%]:hover{\\r\\n    background-color: greenyellow;\\r\\n}\\r\\n\\r\\n.signupform[_ngcontent-%COMP%]{\\r\\n    background-color: #E0DCCC;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IsdUJBQWtCO0lBQWxCLGtCQUFrQjtJQUNsQixnQkFBZ0I7SUFDaEIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksNkJBQTZCO0FBQ2pDOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCIiwiZmlsZSI6ImxvZ2luLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucHJvZmlsZS1pbWctY2FyZHtcclxuICAgIGhlaWdodDogMzAwcHg7XHJcbiAgICB3aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICBtYXJnaW4tbGVmdDogMzUlO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA1MCU7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeTpob3ZlcntcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGdyZWVueWVsbG93O1xyXG59XHJcblxyXG4uc2lnbnVwZm9ybXtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNFMERDQ0M7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/teunv/OneDrive/Documenten/Fontys/Semester 3/Individueel/f1-information/Front-end/Admin-app/src/app/login/login.component.ts"],"names":["jwtDecode","i0","i1","i2","i3","i4","LoginComponent_form_5_div_7_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","LoginComponent_form_5_div_13_div_1_Template","LoginComponent_form_5_div_13_div_2_Template","LoginComponent_form_5_div_13_Template","ɵɵtemplate","ɵɵnextContext","_r6","ɵɵreference","ɵɵadvance","ɵɵproperty","errors","LoginComponent_form_5_div_18_Template","ctx_r8","ɵɵtextInterpolate1","fails","LoginComponent_form_5_Template","_r12","ɵɵgetCurrentView","ɵɵlistener","LoginComponent_form_5_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r3","ctx_r11","form","valid","onSubmit","LoginComponent_form_5_Template_input_ngModelChange_5_listener","$event","ctx_r13","username","LoginComponent_form_5_Template_input_ngModelChange_11_listener","ctx_r14","password","_r4","ctx_r0","submitted","isLoginFailed","LoginComponent_div_6_Template","ctx_r1","roles","LoginComponent_div_7_Template","_r16","LoginComponent_div_7_Template_div_ngSubmit_0_listener","ctx_r15","LoginComponent","constructor","authService","tokenStorage","isLoggedIn","errorMessage","failedLogin","ngOnInit","getToken","getUser","localStorage","getItem","window","login","subscribe","data","console","log","text","saveToken","accessToken","saveUser","getRole","test","reloadPage","err","title","setItem","toLocaleString","Promise","f","setTimeout","location","reload","ɵfac","LoginComponent_Factory","t","ɵɵdirectiveInject","AuthService","TokenStorageService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","LoginComponent_Template","ɵɵelement","directives","NgIf","ɵNgNoValidate","NgControlStatusGroup","NgForm","DefaultValueAccessor","RequiredValidator","NgControlStatus","NgModel","MinLengthValidator","styles"],"mappings":"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","sourcesContent":["import jwtDecode from 'jwt-decode';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../_services/auth.service\";\r\nimport * as i2 from \"../_services/token-storage.service\";\r\nimport * as i3 from \"@angular/common\";\r\nimport * as i4 from \"@angular/forms\";\r\nfunction LoginComponent_form_5_div_7_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 18);\r\n    i0.ɵɵtext(1, \" Username is required! \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction LoginComponent_form_5_div_13_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1, \"Password is required\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction LoginComponent_form_5_div_13_div_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵtext(1, \" Password must be at least 6 characters \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction LoginComponent_form_5_div_13_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 18);\r\n    i0.ɵɵtemplate(1, LoginComponent_form_5_div_13_div_1_Template, 2, 0, \"div\", 19);\r\n    i0.ɵɵtemplate(2, LoginComponent_form_5_div_13_div_2_Template, 2, 0, \"div\", 19);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    i0.ɵɵnextContext();\r\n    const _r6 = i0.ɵɵreference(12);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors[\"required\"]);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors[\"minlength\"]);\r\n} }\r\nfunction LoginComponent_form_5_div_18_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 18);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r8 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" Login failed. You have used \", ctx_r8.fails, \"/5 attemps. \");\r\n} }\r\nfunction LoginComponent_form_5_Template(rf, ctx) { if (rf & 1) {\r\n    const _r12 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"form\", 6, 7);\r\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_form_5_Template_form_ngSubmit_0_listener() { i0.ɵɵrestoreView(_r12); const _r3 = i0.ɵɵreference(1); const ctx_r11 = i0.ɵɵnextContext(); return _r3.form.valid && ctx_r11.onSubmit(); });\r\n    i0.ɵɵelementStart(2, \"div\", 8);\r\n    i0.ɵɵelementStart(3, \"label\", 9);\r\n    i0.ɵɵtext(4, \"Username\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(5, \"input\", 10, 11);\r\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_5_Template_input_ngModelChange_5_listener($event) { i0.ɵɵrestoreView(_r12); const ctx_r13 = i0.ɵɵnextContext(); return ctx_r13.form.username = $event; });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(7, LoginComponent_form_5_div_7_Template, 2, 0, \"div\", 12);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(8, \"div\", 13);\r\n    i0.ɵɵelementStart(9, \"label\", 14);\r\n    i0.ɵɵtext(10, \"Password\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(11, \"input\", 15, 16);\r\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_form_5_Template_input_ngModelChange_11_listener($event) { i0.ɵɵrestoreView(_r12); const ctx_r14 = i0.ɵɵnextContext(); return ctx_r14.form.password = $event; });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(13, LoginComponent_form_5_div_13_Template, 3, 2, \"div\", 12);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(14, \"div\", 13);\r\n    i0.ɵɵelementStart(15, \"button\", 17);\r\n    i0.ɵɵtext(16, \" Login \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(17, \"div\", 13);\r\n    i0.ɵɵtemplate(18, LoginComponent_form_5_div_18_Template, 2, 1, \"div\", 12);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const _r3 = i0.ɵɵreference(1);\r\n    const _r4 = i0.ɵɵreference(6);\r\n    const _r6 = i0.ɵɵreference(12);\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.username);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"ngIf\", _r4.errors && _r3.submitted);\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.form.password);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"ngIf\", _r6.errors && _r3.submitted);\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngIf\", _r3.submitted && ctx_r0.isLoginFailed);\r\n} }\r\nfunction LoginComponent_div_6_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 20);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" Logged in as \", ctx_r1.roles, \". \");\r\n} }\r\nfunction LoginComponent_div_7_Template(rf, ctx) { if (rf & 1) {\r\n    const _r16 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 21);\r\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_div_7_Template_div_ngSubmit_0_listener() { i0.ɵɵrestoreView(_r16); const ctx_r15 = i0.ɵɵnextContext(); return ctx_r15.onSubmit(); });\r\n    i0.ɵɵtext(1, \" You need to wait for 1 minutes. \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nexport class LoginComponent {\r\n    constructor(authService, tokenStorage) {\r\n        this.authService = authService;\r\n        this.tokenStorage = tokenStorage;\r\n        this.form = {\r\n            username: null,\r\n            password: null,\r\n        };\r\n        this.isLoggedIn = false;\r\n        this.isLoginFailed = false;\r\n        this.errorMessage = \"\";\r\n        this.roles = [];\r\n        this.failedLogin = 0;\r\n        this.fails = \"\";\r\n    }\r\n    async ngOnInit() {\r\n        if (this.tokenStorage.getToken()) {\r\n            this.isLoggedIn = true;\r\n            this.roles = this.tokenStorage.getUser();\r\n        }\r\n        if (localStorage.getItem(\"fails\") != null) {\r\n            this.fails = window.localStorage.getItem(\"fails\");\r\n            if (this.fails == \"1\") {\r\n                this.failedLogin = 1;\r\n            }\r\n            else if (this.fails == \"2\") {\r\n                this.failedLogin = 2;\r\n            }\r\n            else if (this.fails == \"3\") {\r\n                this.failedLogin = 3;\r\n            }\r\n            else if (this.fails == \"4\") {\r\n                this.failedLogin = 4;\r\n            }\r\n        }\r\n    }\r\n    onSubmit() {\r\n        const { username, password } = this.form;\r\n        //console.log(this.authService.login(username, password));\r\n        this.authService.login(username, password).subscribe(async (data) => {\r\n            console.log(data.text);\r\n            this.tokenStorage.saveToken(data.accessToken);\r\n            this.tokenStorage.saveUser(data);\r\n            if (this.tokenStorage.getRole() != \"Admin\") {\r\n                var test = jwtDecode(data.accessToken);\r\n            }\r\n            else {\r\n                console.log(this.tokenStorage);\r\n                this.isLoginFailed = false;\r\n                this.isLoggedIn = true;\r\n                this.tokenStorage.saveUser(username);\r\n                this.roles = this.tokenStorage.getUser();\r\n                this.reloadPage();\r\n            }\r\n        }, async (err) => {\r\n            this.errorMessage = err.title;\r\n            this.failedLogin = this.failedLogin + 1;\r\n            localStorage.setItem(\"fails\", this.failedLogin.toLocaleString());\r\n            this.fails = window.localStorage.getItem(\"fails\");\r\n            this.isLoginFailed = true;\r\n            if (this.fails == \"5\") {\r\n                await new Promise(f => setTimeout(f, 60000));\r\n                this.failedLogin = 0;\r\n                localStorage.setItem(\"fails\", this.failedLogin.toLocaleString());\r\n                this.fails = window.localStorage.getItem(\"fails\");\r\n            }\r\n        });\r\n    }\r\n    reloadPage() {\r\n        window.location.reload();\r\n    }\r\n}\r\nLoginComponent.ɵfac = function LoginComponent_Factory(t) { return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.TokenStorageService)); };\r\nLoginComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: LoginComponent, selectors: [[\"app-login\"]], decls: 8, vars: 3, consts: [[1, \"col-md-12\"], [1, \"card\", \"card-container\", \"signupform\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"name\", \"form\", \"novalidate\", \"\", \"class\", \"signupform\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 3, \"ngSubmit\", 4, \"ngIf\"], [\"name\", \"form\", \"novalidate\", \"\", 1, \"signupform\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [1, \"form-group\", \"signupform\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", \"minlength\", \"6\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [4, \"ngIf\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-danger\", 3, \"ngSubmit\"]], template: function LoginComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelement(2, \"img\", 2);\r\n        i0.ɵɵelementStart(3, \"p\");\r\n        i0.ɵɵtext(4, \"Only admins can login to this application.\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(5, LoginComponent_form_5_Template, 19, 5, \"form\", 3);\r\n        i0.ɵɵtemplate(6, LoginComponent_div_6_Template, 2, 1, \"div\", 4);\r\n        i0.ɵɵtemplate(7, LoginComponent_div_7_Template, 2, 0, \"div\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn && ctx.failedLogin < 5);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.failedLogin == 5);\r\n    } }, directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.RequiredValidator, i4.NgControlStatus, i4.NgModel, i4.MinLengthValidator], styles: [\".profile-img-card[_ngcontent-%COMP%]{\\r\\n    height: 300px;\\r\\n    width: -moz-fit-content;\\r\\n    width: fit-content;\\r\\n    margin-left: 35%;\\r\\n    margin-right: 50%;\\r\\n}\\r\\n\\r\\n.btn-primary[_ngcontent-%COMP%]:hover{\\r\\n    background-color: greenyellow;\\r\\n}\\r\\n\\r\\n.signupform[_ngcontent-%COMP%]{\\r\\n    background-color: #E0DCCC;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxhQUFhO0lBQ2IsdUJBQWtCO0lBQWxCLGtCQUFrQjtJQUNsQixnQkFBZ0I7SUFDaEIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksNkJBQTZCO0FBQ2pDOztBQUVBO0lBQ0kseUJBQXlCO0FBQzdCIiwiZmlsZSI6ImxvZ2luLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucHJvZmlsZS1pbWctY2FyZHtcclxuICAgIGhlaWdodDogMzAwcHg7XHJcbiAgICB3aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICBtYXJnaW4tbGVmdDogMzUlO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiA1MCU7XHJcbn1cclxuXHJcbi5idG4tcHJpbWFyeTpob3ZlcntcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGdyZWVueWVsbG93O1xyXG59XHJcblxyXG4uc2lnbnVwZm9ybXtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNFMERDQ0M7XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}